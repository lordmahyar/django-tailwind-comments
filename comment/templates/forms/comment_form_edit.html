{% load comment_tags %}

<form id="form-comment-edit-{{ comment.urlhash }}" method="post" action="{% url 'comment:update' pk=comment.pk %}">{% csrf_token %}
    <div class="block rounded-lg bg-gray-200 pr-4 pb-4 pl-1 pt-1">
        <textarea name="content" oninput="CheckEditTextarea('form-comment-edit-{{ comment.urlhash }}')" spellcheck="false" class="p-1 rounded-md block w-full border-2 border-gray-200 resize-y bg-transparent box-border text-base mb-2 outline-0 min-h-[66px] selection:bg-indigo-200 placeholder:text-gray-500">{{ comment.content }}</textarea>

        <div class="flex justify-end">
            {#ALLOW_SPOILER#}
            {% get_settings 'COMMENT_ALLOW_SPOILER' as COMMENT_ALLOW_SPOILER %}
            {% if COMMENT_ALLOW_SPOILER %}
                <label class="mr-4 grid content-center">
                    <input type="checkbox" name="is_spoiler" id="id_is_spoiler" class="peer sr-only" {% if comment.is_spoiler %}checked="checked"{% endif %}/>
                    {#ICON EYE#}
                    <span class="block cursor-pointer peer-checked:hidden">{% include 'icons/icon_eye.html' with class='inline-block w-8 fill-none stroke-gray-500' %}</span>
                    {#ICON EYE OFF#}
                    <span class="hidden cursor-pointer peer-checked:block">{% include 'icons/icon_eye_off.html' with class='inline-block w-8 fill-gray-500' %}</span>
                </label>
            {% endif %}
            <label for="toggle-edit-{{ comment.urlhash }}" onclick="ResetEditCommentForm('form-comment-edit-{{ comment.urlhash }}','{{ comment.content }}','{{ comment.is_spoiler }}')" class="inline cursor-pointer rounded-lg border-none bg-gray-500 py-2 px-6 text-xl text-white outline-0 shadow-md mr-2">Cancel</label>
            <button type="button" onclick="EditComment('form-comment-edit-{{ comment.urlhash }}')" class="rounded-lg border-none bg-green-600 py-2 px-6 text-xl text-white outline-0 shadow-md">Edit</button>
        </div>
    </div>
</form>