function getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let n=0;n<o.length;n++){const m=o[n].trim();if(m.substring(0,e.length+1)===e+"="){t=decodeURIComponent(m.substring(e.length+1));break}}}return t}function LoadComment(e){$(`#comment-${e}`).load(`/comment/detail?urlhash=${e}`)}function LoadCommentList(e=1){let t=$("#form-comment-create [name='app_name']").val(),o=$("#form-comment-create [name='model_name']").val(),n=$("#form-comment-create [name='object_id']").val();$("#comment-list").load(`/comment/list?app_name=${t}&model_name=${o}&object_id=${n}&page=${e}`)}function LoadDeleteCommentForm(e){$("#comment-modal").load(`/comment/delete/${e}`)}function LoadCommentReactions(e){$(`#form-comment-react-${e} #comment-react-list`).load(`/comment/react?urlhash=${e}`)}function ResetCreateCommentForm(){$("#form-comment-create [name='content']").val("").height("124px"),$("#form-comment-create [name='is_spoiler']").prop("checked",!1)}function ResetEditCommentForm(e,t,o){let n=$(`#${e}`);n.find("textarea").val(t).removeClass("animate-[pulse_500ms_linear_infinite] border-red-400").addClass("border-gray-200"),"True"===o?n.find("[name='is_spoiler']").prop("checked",!0):n.find("[name='is_spoiler']").prop("checked",!1)}function ResetDeleteCommentForm(){$("#comment-modal").html("")}function CreateComment(e){let t=$(`#${e}`),o=t.prop("method"),n=t.prop("action"),m={app_name:$("#form-comment-create [name='app_name']").val(),model_name:$("#form-comment-create [name='model_name']").val(),content_type:$("#form-comment-create [name='content_type']").val(),object_id:$("#form-comment-create [name='object_id']").val(),content:$(`#${e} [name='content']`).val(),is_spoiler:$(`#${e} [name='is_spoiler']`).is(":checked"),parent_id:$(`#${e} [name='parent_id']`).val()};$.ajax({type:o,url:n,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},data:m,success:function(){if(m.parent_id){LoadCommentList($(`#form-comment-reply-${m.parent_id} [name='page']`).val())}else ResetCreateCommentForm(),LoadCommentList()},error:function(){""!==$(`#${e} textarea`).val().trim()&&alert("ERROR in Creating Comment!")}})}function CheckEditTextarea(e){let t=$(`#${e} textarea`);""===t.val().trim()?t.removeClass("border-gray-200").addClass("border-red-400"):t.removeClass("border-red-400 animate-[pulse_500ms_linear_infinite]").addClass("border-gray-200")}function EditComment(e){let t=$(`#${e}`),o=t.prop("method"),n=t.prop("action"),m={content:$(`#${e} [name='content']`).val(),is_spoiler:$(`#${e} [name='is_spoiler']`).is(":checked"),urlhash:e.replace("form-comment-edit-","")};$.ajax({type:o,url:n,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},data:m,success:function(e){e.urlhash&&LoadComment(e.urlhash)},error:function(){let t=$(`#${e} textarea`);""===t.val().trim()?t.removeClass("border-gray-200").addClass("animate-[pulse_500ms_linear_infinite] border-red-400"):alert("ERROR in Creating Comment!")}})}function DeleteComment(e){let t=$(`#form-comment-delete-${e}`),o=t.prop("method"),n=t.prop("action");$.ajax({type:o,url:n,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},success:function(){ResetDeleteCommentForm(),LoadCommentList()},error:function(){alert("ERROR in Deleting Comment!")}})}function ReactComment(e,t){let o=$(`#form-comment-react-${e}`),n=o.prop("method"),m=o.prop("action");$.ajax({type:n,url:m,data:{urlhash:e,react_slug:t},headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},success:function(){LoadCommentReactions(e)}})}$(document).ready((function(){LoadCommentList()}));
