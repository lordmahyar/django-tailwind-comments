function getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let n=0;n<o.length;n++){const m=o[n].trim();if(m.substring(0,e.length+1)===e+"="){t=decodeURIComponent(m.substring(e.length+1));break}}}return t}function LoadCommentList(){let e=$("#form-comment-create [name='app_name']").val(),t=$("#form-comment-create [name='model_name']").val(),o=$("#form-comment-create [name='object_id']").val();$("#comment-list").load(`/comment/list?app_name=${e}&model_name=${t}&object_id=${o}`)}function LoadDeleteCommentForm(e){$("#comment-modal").load(`/comment/delete/${e}`)}function LoadCommentReactions(e){$(`#form-comment-react-${e} #comment-react-list`).load(`/comment/react?urlhash=${e}`)}function ResetCreateCommentForm(){$("#form-comment-create [name='content']").val("").height("120px"),$("#form-comment-create [name='is_spoiler']").prop("checked",!1)}function ResetDeleteCommentForm(){$("#comment-modal").html("")}function CreateComment(e){let t=$(`#${e}`),o=t.prop("method"),n=t.prop("action"),m={app_name:$("#form-comment-create [name='app_name']").val(),model_name:$("#form-comment-create [name='model_name']").val(),content_type:$("#form-comment-create [name='content_type']").val(),object_id:$("#form-comment-create [name='object_id']").val(),content:$(`#${e} [name='content']`).val(),is_spoiler:$(`#${e} [name='is_spoiler']`).is(":checked"),parent_id:$(`#${e} [name='parent_id']`).val()};$.ajax({type:o,url:n,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},data:m,success:function(e){"success"===e.result?(ResetCreateCommentForm(),LoadCommentList()):"fail"===e.result&&alert("ERROR in CreateComment function!")}})}function EditComment(e){let t=$(`#${e}`),o=t.prop("method"),n=t.prop("action"),m={content:$(`#${e} [name='content']`).val(),is_spoiler:$(`#${e} [name='is_spoiler']`).is(":checked"),urlhash:e.replace("form-comment-edit-","")};$.ajax({type:o,url:n,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},data:m,success:function(e){"success"===e.result?LoadCommentList():"fail"===e.result&&alert("ERROR in EditComment function!")}})}function DeleteComment(e){let t=$(`#form-comment-delete-${e}`),o=t.prop("method"),n=t.prop("action");$.ajax({type:o,url:n,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},success:function(e){"success"===e.result?(ResetDeleteCommentForm(),LoadCommentList()):"fail"===e.result&&alert("ERROR in CreateComment function!")}})}function ReactComment(e,t){let o=$(`#form-comment-react-${e}`),n=o.prop("method"),m=o.prop("action");$.ajax({type:n,url:m,data:{urlhash:e,react_slug:t},headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},success:function(t){LoadCommentReactions(e)}})}$(document).ready((function(){LoadCommentList()}));
